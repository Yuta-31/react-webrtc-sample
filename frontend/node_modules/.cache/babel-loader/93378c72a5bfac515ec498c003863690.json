{"ast":null,"code":"import _slicedToArray from\"/Users/yuta/Documents/work/web-rtc/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import'./Video.css';import socketClient from'socket.io-client';import{Button,Stack,Item}from'@mui/material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SERVER=\"https://webrtcreact.herokuapp.com\";var socket=socketClient(SERVER);var isHost=false;var room='hoge';var constraints={video:true,audio:false};var offerOptions={offerToReceiveVideo:1};var localStream=null;var remoteStream=null;var peerConnection=null;var isStarted=false;var config={\"iceServers\":[{\"urls\":\"stun:stun.l.google.com:19302\"},{\"urls\":\"stun:stun1.l.google.com:19302\"},{\"urls\":\"stun:stun2.l.google.com:19302\"}]};export default function VideoConnect4(){var localVideoRef=React.useRef(null);var remoteVideoRef=React.useRef(null);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isKnocking=_React$useState2[0],setIsKnocking=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),canCalling=_React$useState4[0],setCanCalling=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAllowed=_React$useState6[0],setIsAllowed=_React$useState6[1];socket.on('knocked response',function(numClients,room){if(numClients===0){socket.emit('create',room);}else if(numClients===1){socket.emit('join',room);}else{console.log(\"room [\"+room+\"] is full.\");}});socket.on('created',function(room){console.log('[Server said] you created room ['+room+']');isHost=true;if(!isStarted){startConnect();}});socket.on('joined',function(room,id){console.log('[Server said] '+id+' joined room ['+room+']');if(isHost){setIsKnocking(true);}else{if(!isStarted){startConnect();}}});socket.on('allowed',function(){console.log('allowed!');setIsAllowed(true);});socket.on('offer',function(description){console.log('Offer received');if(!isHost&&!isStarted){startConnect();}peerConnection.setRemoteDescription(description);peerConnection.createAnswer().then(setLocalAndSendMessage).catch(handleAnswerError);});socket.on('answer',function(description){console.log('Answer received');if(isStarted){peerConnection.setRemoteDescription(description);}});socket.on('candidate',function(description){console.log('candidate Recieved');if(isStarted){peerConnection.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:description.label,candidate:description.candidate}));}});function createPeerConnection(){try{peerConnection=new RTCPeerConnection(config);peerConnection.onicecandidate=handleConnection;peerConnection.onaddstream=handleAddStream;peerConnection.onremovestream=handleRemoveStream;console.log('PeerConnection is created');}catch(error){console.log('[ERROR]',error);return;}}function handleConnection(event){if(event.candidate&&peerConnection.signalingState!=='stable'){console.log(peerConnection.signalingState);socket.emit('message',{type:'candidate',label:event.candidate.sdpMLineIndex,id:event.candidate.sdpMid,candidate:event.candidate.candidate});}else{console.log('End of candidates');}}function handleAddStream(event){console.log('add stream');remoteStream=event.stream;}function handleRemoveStream(event){console.log(event);}function startConnect(){createPeerConnection();peerConnection.addStream(localStream);isStarted=true;if(!isHost){peerConnection.createOffer(offerOptions).then(setLocalAndSendMessage).catch(handleOfferError);}}function setLocalAndSendMessage(description){peerConnection.setLocalDescription(description);socket.emit('message',description);}function handleOfferError(error){console.log(\"[ERROR]\",error);}function handleAnswerError(error){console.log(\"[ERROR]\"+error.toString());}function allowJoin(){console.log('allow');socket.emit('allow');setIsAllowed(true);}function calling(){socket.emit('knock',room);}React.useEffect(function(){navigator.mediaDevices.getUserMedia(constraints).then(function(stream){localStream=stream;console.log(localStream);localVideoRef.current.srcObject=stream;setCanCalling(true);}).catch(function(error){console.log(\"ERROR\",error);});var adapterScript=document.createElement('script');adapterScript.src=\"https://webrtc.github.io/adapter/adapter-latest.js\";adapterScript.async=true;document.body.appendChild(adapterScript);return function(){document.body.removeChild(adapterScript);};},[]);React.useEffect(function(){remoteVideoRef.current.srcObject=remoteStream;},[isAllowed]);return/*#__PURE__*/_jsx(\"div\",{className:\"VideoView\",children:/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spcing:2,children:[/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(\"video\",{playsInline:true,autoPlay:true,ref:localVideoRef})}),/*#__PURE__*/_jsx(Item,{children:/*#__PURE__*/_jsx(\"video\",{playsInline:true,autoPlay:true,ref:remoteVideoRef})})]}),/*#__PURE__*/_jsxs(Stack,{spacing:2,direction:\"row\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:allowJoin,disabled:!isKnocking,children:\"ALLOW\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:calling,disabled:!canCalling,children:\"CALL\"})]})]})});}","map":{"version":3,"sources":["/Users/yuta/Documents/work/web-rtc/frontend/src/VideoConnect5.js"],"names":["React","socketClient","Button","Stack","Item","SERVER","socket","isHost","room","constraints","video","audio","offerOptions","offerToReceiveVideo","localStream","remoteStream","peerConnection","isStarted","config","VideoConnect4","localVideoRef","useRef","remoteVideoRef","useState","isKnocking","setIsKnocking","canCalling","setCanCalling","isAllowed","setIsAllowed","on","numClients","emit","console","log","startConnect","id","description","setRemoteDescription","createAnswer","then","setLocalAndSendMessage","catch","handleAnswerError","addIceCandidate","RTCIceCandidate","sdpMLineIndex","label","candidate","createPeerConnection","RTCPeerConnection","onicecandidate","handleConnection","onaddstream","handleAddStream","onremovestream","handleRemoveStream","error","event","signalingState","type","sdpMid","stream","addStream","createOffer","handleOfferError","setLocalDescription","toString","allowJoin","calling","useEffect","navigator","mediaDevices","getUserMedia","current","srcObject","adapterScript","document","createElement","src","async","body","appendChild","removeChild"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './Video.css';\nimport socketClient from 'socket.io-client';\nimport { Button, Stack, Item } from '@mui/material'\n\nconst SERVER = \"https://webrtcreact.herokuapp.com\";\n\nconst socket = socketClient(SERVER);\n\nvar isHost = false;\nvar room = 'hoge';\n\nconst constraints = {\n  video: true,\n  audio: false,\n}\nconst offerOptions = {\n  offerToReceiveVideo: 1,\n}\n\nvar localStream = null;\nvar remoteStream = null;\nvar peerConnection = null;\nvar isStarted = false;\n\nlet config = {\n  \"iceServers\": [\n    { \"urls\": \"stun:stun.l.google.com:19302\" },\n    { \"urls\": \"stun:stun1.l.google.com:19302\" },\n    { \"urls\": \"stun:stun2.l.google.com:19302\" },\n  ]\n};\n\n\nexport default function VideoConnect4() {\n  const localVideoRef = React.useRef(null);\n  const remoteVideoRef = React.useRef(null);\n  const [isKnocking, setIsKnocking] = React.useState(false);\n  const [canCalling, setCanCalling] = React.useState(false);\n  const [isAllowed, setIsAllowed] = React.useState(false);\n\n  socket.on('knocked response', (numClients, room) => {\n    if (numClients === 0) {\n      socket.emit('create', room);\n    } else if (numClients === 1) {\n      socket.emit('join', room);\n    } else {\n      console.log(\"room [\" + room + \"] is full.\");\n    }\n  });\n  socket.on('created', (room) => {\n    console.log('[Server said] you created room [' + room + ']');\n    isHost = true;\n    if (!isStarted) {\n      startConnect();\n    }\n  });\n  socket.on('joined', (room, id) => {\n    console.log('[Server said] ' + id + ' joined room [' + room + ']');\n    if (isHost) {\n      setIsKnocking(true);\n    } else {\n      if (!isStarted) {\n        startConnect();\n      }\n    }\n  });\n  socket.on('allowed', () => {\n    console.log('allowed!');\n    setIsAllowed(true);\n  });\n  socket.on('offer', (description) => {\n    console.log('Offer received');\n    if (!isHost && !isStarted) {\n      startConnect();\n    }\n    peerConnection.setRemoteDescription(description);\n    peerConnection.createAnswer()\n      .then(setLocalAndSendMessage)\n      .catch(handleAnswerError);\n  });\n  socket.on('answer', (description) => {\n    console.log('Answer received');\n    if (isStarted) {\n      peerConnection.setRemoteDescription(description);\n    }\n  });\n  socket.on('candidate', (description) => {\n    console.log('candidate Recieved');\n    if (isStarted) {\n      peerConnection.addIceCandidate(\n        new RTCIceCandidate({\n          sdpMLineIndex: description.label,\n          candidate: description.candidate,\n        })\n      );\n    }\n  });\n\n  function createPeerConnection() {\n    try {\n      peerConnection = new RTCPeerConnection( config );\n      peerConnection.onicecandidate = handleConnection;\n      peerConnection.onaddstream = handleAddStream;\n      peerConnection.onremovestream = handleRemoveStream;\n      console.log('PeerConnection is created');\n    } catch (error) {\n      console.log('[ERROR]', error);\n      return;\n    }\n  }\n  function handleConnection(event) {\n    if (event.candidate && peerConnection.signalingState !== 'stable') {\n      console.log(peerConnection.signalingState);\n      socket.emit('message', {\n        type: 'candidate',\n        label: event.candidate.sdpMLineIndex,\n        id: event.candidate.sdpMid,\n        candidate: event.candidate.candidate\n      });\n    } else {\n      console.log('End of candidates');\n    }\n  }\n  function handleAddStream(event) {\n    console.log('add stream');\n    remoteStream = event.stream;\n  }\n  function handleRemoveStream(event) {\n    console.log(event);\n  }\n  function startConnect() {\n    createPeerConnection();\n    peerConnection.addStream(localStream);\n    isStarted = true;\n    if (!isHost) {\n      peerConnection.createOffer(offerOptions)\n        .then(setLocalAndSendMessage)\n        .catch(handleOfferError);\n    }\n  }\n  function setLocalAndSendMessage(description) {\n    peerConnection.setLocalDescription(description);\n    socket.emit('message', description);\n  }\n  function handleOfferError(error) {\n    console.log(\"[ERROR]\", error);\n  }\n  function handleAnswerError(error) {\n    console.log(\"[ERROR]\" + error.toString());\n  }\n  function allowJoin() {\n    console.log('allow');\n    socket.emit('allow');\n    setIsAllowed(true);\n  }\n  function calling() {\n    socket.emit('knock', room);\n  }\n\n  React.useEffect(() => {\n    navigator.mediaDevices.getUserMedia(constraints)\n      .then((stream) => {\n        localStream = stream;\n        console.log(localStream);\n        localVideoRef.current.srcObject = stream;\n        setCanCalling(true);\n      })\n      .catch((error) => {\n        console.log(\"ERROR\", error);\n      });\n    const adapterScript = document.createElement('script');\n    adapterScript.src = \"https://webrtc.github.io/adapter/adapter-latest.js\";\n    adapterScript.async = true;\n    document.body.appendChild(adapterScript);\n    return () => {\n      document.body.removeChild(adapterScript);\n    };\n  }, []);\n  React.useEffect(() => {\n    remoteVideoRef.current.srcObject = remoteStream;\n  },[isAllowed]);\n\n  return (\n    <div className=\"VideoView\">\n      <Stack spacing={2}>\n        <Stack direction=\"row\" spcing={2}>\n          <Item><video playsInline autoPlay ref={localVideoRef} /></Item>\n          <Item><video playsInline autoPlay ref={remoteVideoRef} /></Item>\n        </Stack>\n        <Stack spacing={2} direction=\"row\">\n          <Button variant=\"contained\" onClick={allowJoin} disabled={!isKnocking}>ALLOW</Button>\n          <Button variant=\"contained\" onClick={calling} disabled={!canCalling}>CALL</Button>\n        </Stack>\n      </Stack>\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}